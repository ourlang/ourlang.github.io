(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{378:function(s,a,n){"use strict";n.r(a);var t=n(18),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"centos7安装nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装nginx"}},[s._v("#")]),s._v(" CentOS7安装Nginx")]),s._v(" "),n("h2",{attrs:{id:"_1-编译安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-编译安装"}},[s._v("#")]),s._v(" 1 编译安装")]),s._v(" "),n("h3",{attrs:{id:"_1-1-安装所需环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装所需环境"}},[s._v("#")]),s._v(" 1.1 安装所需环境")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_1-2-下载安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-下载安装包"}},[s._v("#")]),s._v(" 1.2 下载安装包")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://nginx.org/download/nginx-1.14.0.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("a",{attrs:{"data-fancybox":"",title:"nginx",href:"/img/blogImage/nginx.png"}},[n("img",{attrs:{src:"/img/blogImage/nginx.png",alt:"nginx"}})])]),s._v(" "),n("h3",{attrs:{id:"_1-3-解压安装包并进入目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-解压安装包并进入目录"}},[s._v("#")]),s._v(" 1.3 解压安装包并进入目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxf nginx-1.14.0.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.14.0\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_1-4-编译安装（默认设置）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-编译安装（默认设置）"}},[s._v("#")]),s._v(" 1.4 编译安装（默认设置）")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("./configure \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_1-5-查看安装目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-查看安装目录"}},[s._v("#")]),s._v(" 1.5 查看安装目录")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_1-6-启动nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-启动nginx"}},[s._v("#")]),s._v(" 1.6 启动Nginx")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/nginx/sbin\n./nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_1-7-查看nginx是否运行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-查看nginx是否运行"}},[s._v("#")]),s._v(" 1.7 查看Nginx是否运行")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n\nroot      "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4772")]),s._v("     "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":27 ?        00:00:00 nginx: master process ./nginx\nnobody    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4773")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4772")]),s._v("  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":27 ?        00:00:00 nginx: worker process\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_1-8-修改nginx配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-修改nginx配置文件"}},[s._v("#")]),s._v(" 1.8 修改nginx配置文件")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/nginx/conf/nginx.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("注意：对于编译安装来说，任何对于Nginx配置文件的修改，如想使其生效，必须重载Nginx，使用以下命令：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("./nginx -s reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_1-9-设置nginx开机自启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-设置nginx开机自启动"}},[s._v("#")]),s._v(" 1.9 设置nginx开机自启动")]),s._v(" "),n("h4",{attrs:{id:"_1-9-1-进入到-lib-systemd-system"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-1-进入到-lib-systemd-system"}},[s._v("#")]),s._v(" 1.9.1 进入到/lib/systemd/system/")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /lib/systemd/system/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"_1-9-2-创建nginx-service文件并编辑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-2-创建nginx-service文件并编辑"}},[s._v("#")]),s._v(" 1.9.2 创建nginx.service文件并编辑")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" nginx.service\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("复制以下代码到nginx.service")]),s._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[s._v("[Unit]\nDescription=nginx service\nAfter=network.target \n   \n[Service] \nType=forking \nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s quit\nPrivateTmp=true \n   \n[Install] \nWantedBy=multi-user.target\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":服务的说明\nDescription:描述服务\nAfter:描述服务类别\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("服务运行参数的设置\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("forking是后台运行的形式\nExecStart为服务的具体运行命令\nExecReload为重启命令\nExecStop为停止命令\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PrivateTmp")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("True表示给服务分配独立的临时空间\n注意："),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("的启动、重启、停止命令全部要求使用绝对路径\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("运行级别下服务安装的相关设置，可设置为多用户，即系统运行级别为3\n\n保存退出。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h4",{attrs:{id:"_1-9-3-加入开机自启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-3-加入开机自启动"}},[s._v("#")]),s._v(" 1.9.3 加入开机自启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"_1-9-4-其他命令汇总"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-4-其他命令汇总"}},[s._v("#")]),s._v(" 1.9.4 其他命令汇总")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl start nginx.service　         启动nginx服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl stop nginx.service　          停止服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl restart nginx.service　       重新启动服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl list-units --type=service     查看所有已启动的服务")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status nginx.service          查看服务当前状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl enable nginx.service          设置开机自启动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl disable nginx.service         停止开机自启动")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h2",{attrs:{id:"_2-yum安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-yum安装"}},[s._v("#")]),s._v(" 2 yum安装")]),s._v(" "),n("h3",{attrs:{id:"_2-1-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装"}},[s._v("#")]),s._v(" 2.1 安装")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("yum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-2-启动nginx并设置开机启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-启动nginx并设置开机启动"}},[s._v("#")]),s._v(" 2.2 启动Nginx并设置开机启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl start nginx\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_2-3-验证nginx是否启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-验证nginx是否启动"}},[s._v("#")]),s._v(" 2.3 验证Nginx是否启动")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("a",{attrs:{"data-fancybox":"",title:"nginx",href:"/img/blogImage/nginx2.png"}},[n("img",{attrs:{src:"/img/blogImage/nginx2.png",alt:"nginx"}})])]),s._v(" "),n("h3",{attrs:{id:"_2-4-修改nginx-conf"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-修改nginx-conf"}},[s._v("#")]),s._v(" 2.4 修改nginx.conf")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/nginx/nginx.conf\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2-5-使修改的配置文件立即生效"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-使修改的配置文件立即生效"}},[s._v("#")]),s._v(" 2.5 使修改的配置文件立即生效")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl restart nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),s._v(" "),n("src-comment")],1)}),[],!1,null,null,null);a.default=e.exports}}]);