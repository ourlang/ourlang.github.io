(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{464:function(s,a,t){"use strict";t.r(a);var n=t(18),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"go-swagger安装及使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-swagger安装及使用"}},[s._v("#")]),s._v(" go-swagger安装及使用")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("go-swagger介绍")]),s._v(" "),t("p",[s._v("go-swagger 为社区带来了一套完整的，功能齐全的高性能API组件，可与Swagger API一起使用：服务器，客户端和数据模型。")]),s._v(" "),t("ul",[t("li",[s._v("根据标准规范生成服务器")]),s._v(" "),t("li",[s._v("从摇摇欲坠的规范生成客户端")]),s._v(" "),t("li",[s._v("支持jsonschema和swagger提供的大多数功能，包括多态")]),s._v(" "),t("li",[s._v("从带注释的go代码中生成标准规范")]),s._v(" "),t("li",[s._v("配合规范使用的其他工具")]),s._v(" "),t("li",[s._v("强大的定制功能，带有供应商扩展和可定制的模板")]),s._v(" "),t("li",[s._v("我们在代码生成方面的重点是生成惯用的,快速执行的代码,该代码可与golint,go vet等配合使用")])])]),s._v(" "),t("h2",{attrs:{id:"_1-代码下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码下载"}},[s._v("#")]),s._v(" 1 代码下载")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/go-swagger/go-swagger",target:"_blank",rel:"noopener noreferrer"}},[s._v("go-swagger源码地址下载"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go get github.com/go-swagger/go-swagger\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_2-安装swagger"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装swagger"}},[s._v("#")]),s._v(" 2 安装swagger")]),s._v(" "),t("blockquote",[t("p",[s._v("安装go-swagger，移动到下载的go-swagger包目录（应该是GOPATH/src/pkg/github.com/go-swagger,理解这个意思就好，路径不一定对）。")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("go "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ./cmd/swagger\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_3-swagger规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-swagger规范"}},[s._v("#")]),s._v(" 3 swagger规范")]),s._v(" "),t("blockquote",[t("p",[s._v("将下面规范放在go源码中每个"),t("code",[s._v("controller")]),s._v("函数前面")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[s._v("// swagger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("operation POST /user/addUser user addUser\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n// summary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 新增用户信息\n// description"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 用于系统用户的新增\n// parameters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" username\n//   in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" body\n//   description"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 用户名\n//   type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string\n//   required"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" password\n//   in"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" body\n//   description"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 密码  \n//   type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" string\n//   required"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v("\n// responses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n//   200"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" repoResp\n//   400"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" badReq\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h2",{attrs:{id:"_4-swagger规范解释说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-swagger规范解释说明"}},[s._v("#")]),s._v(" 4 swagger规范解释说明")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[s._v("// swagger"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("operaion "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("POST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("请求方式(可以是GET\\PUT\\DELETE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v(")"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("请求地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("标签"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("用于此端点的请求"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  （你可以将最后两个理解为id 节点，用于标注地址）\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v(" 这个部分下面是YAML格式的swagger规范.确保您的缩进是一致的和正确的\n// summary"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 标题\n// description"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 描述\n// parametres"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("   下面是参数了\n// "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 参数名\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("in")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("header"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),s._v("query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 参数的位置\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 描述\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 类型\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("required")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 是否必须\n// responses"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 响应\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"_5-生成swagger-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-生成swagger-json"}},[s._v("#")]),s._v(" 5 生成swagger.json")]),s._v(" "),t("blockquote",[t("p",[s._v("进入自己项目的根目录,根据swagger规范,创建 "),t("code",[s._v("swagger.json")]),s._v("规范文档")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("swagger generate spec -o ./swagger.json  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("解释：generate生成，spec指规格的意思 -o，这个字母o的意思是：-output即输出 。")]),s._v(" "),t("li",[s._v("总的命令意思就是：swagger 生成 规格 -输出 输出的路径和文件。")])]),s._v(" "),t("h2",{attrs:{id:"_6-启动swagger服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动swagger服务"}},[s._v("#")]),s._v(" 6 启动swagger服务")]),s._v(" "),t("p",[s._v("启动一个"),t("code",[s._v("http")]),s._v("服务同时将"),t("code",[s._v("json")]),s._v("文档放入"),t("a",{attrs:{href:"http://petstore.swagger.io",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://petstore.swagger.io"),t("OutboundLink")],1),s._v(" 执行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("swagger serve -F"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("swagger D:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("go_project"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("src"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("kratos"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("api.swagger.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("a",{attrs:{"data-fancybox":"",title:"启动swagger服务",href:"/img/goImage/swagger-run.png"}},[t("img",{attrs:{src:"/img/goImage/swagger-run.png",alt:"启动swagger服务"}})])]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"swagger服务页面",href:"/img/goImage/swagger-login.png"}},[t("img",{attrs:{src:"/img/goImage/swagger-login.png",alt:"swagger服务页面"}})])]),s._v(" "),t("h2",{attrs:{id:"_7-关于swagger-ui的页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-关于swagger-ui的页面"}},[s._v("#")]),s._v(" 7 关于swagger-UI的页面")]),s._v(" "),t("blockquote",[t("p",[s._v("如果你想要"),t("code",[s._v("petstore.swagger.io")]),s._v("的那种页面,你可以自己下载"),t("a",{attrs:{href:"https://github.com/swagger-api/swagger-ui",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/swagger-api/swagger-ui"),t("OutboundLink")],1),s._v(" ,\n下载好后进入"),t("code",[s._v("dist")]),s._v("页面执行运行"),t("code",[s._v("index.html")]),s._v("即可")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://goswagger.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("更多go-swagger使用请参考官网"),t("OutboundLink")],1)]),s._v(" "),t("src-comment")],1)}),[],!1,null,null,null);a.default=e.exports}}]);