(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{389:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"权限服务器keto"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限服务器keto"}},[t._v("#")]),t._v(" 权限服务器keto")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("keto介绍")]),t._v(" "),a("p",[t._v("ORY Keto是一种权限服务器，它实现最佳实践访问控制机制：")]),t._v(" "),a("ul",[a("li",[t._v("今天可用：具有精确，全局和正则表达式匹配策略的ORY风格的访问控制策略")]),t._v(" "),a("li",[t._v("即将推出：")]),t._v(" "),a("li",[t._v("访问控制列表")]),t._v(" "),a("li",[t._v("基于角色的访问控制")]),t._v(" "),a("li",[t._v("具有上下文的基于角色的访问控制（Google / Kubernetes风格）")]),t._v(" "),a("li",[t._v("Amazon Web Services身份和访问管理策略（AWS IAM策略）")]),t._v(" "),a("li",[t._v("每种机制都由在开放策略代理之上实现的决策引擎提供动力,并提供定义明确的管理和授权端点")])])]),t._v(" "),a("h2",{attrs:{id:"_1-代码下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码下载"}},[t._v("#")]),t._v(" 1 代码下载")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/ory/keto",target:"_blank",rel:"noopener noreferrer"}},[t._v("keto源码地址下载"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.ory.sh/?utm_source=github&utm_medium=banner&utm_campaign=keto",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档简单说明"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("解压说明")]),t._v(" "),a("p",[a("strong",[t._v("把下载的源码解压后放在本地"),a("code",[t._v("%GOPATH%/src")]),t._v("目录下")])]),t._v(" "),a("p",[a("strong",[t._v("注:GOPATH为项目的运行时的工作空间位置,GOPATH其中包含三个子目录如下")])]),t._v(" "),a("ul",[a("li",[t._v("src 目录包含Go的源文件，它们被组织成包（每个目录都对应一个包）")]),t._v(" "),a("li",[t._v("pkg 目录包含包对象")]),t._v(" "),a("li",[t._v("bin 目录包含可执行命令")])])]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"keto存放位置",href:"/img/goImage/keto1.png"}},[a("img",{attrs:{src:"/img/goImage/keto1.png",alt:"keto存放位置"}})])]),t._v(" "),a("h2",{attrs:{id:"_2-关键词介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-关键词介绍"}},[t._v("#")]),t._v(" 2 关键词介绍")]),t._v(" "),a("h3",{attrs:{id:"_2-1-rbac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-rbac"}},[t._v("#")]),t._v(" 2.1 RBAC")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("RBAC介绍")]),t._v(" "),a("p",[t._v("​RBAC是基于角色的访问控制（"),a("code",[t._v("Role-Based Access Control")]),t._v(" ）在 RBAC  中，权限与角色相关联，用户通过成为适当角色的成员而得到这些角色的权限。这就极大地简化了权限的管理。这样管理都是层级相互依赖的，权限赋予给角色，而把角色又赋予用户，这样的权限设计很清楚，管理起来很方便。\n。RBAC  认为授权实际上是"),a("code",[t._v("Who")]),t._v(" 、"),a("code",[t._v("What")]),t._v(" 、"),a("code",[t._v("How")]),t._v(" 三元组之间的关系，也就是"),a("code",[t._v("Who")]),t._v(" 对"),a("code",[t._v("What")]),t._v(" 进行"),a("code",[t._v("How")]),t._v(" 的操作，也就是“主体”对“客体”的操作。\n然后 RBAC  又分为"),a("code",[t._v("RBAC0、RBAC1、RBAC2、RBAC3")]),t._v(" ，如果你不知道他们有什么区别，你可以百度百科："),a("a",{attrs:{href:"http://baike.baidu.com/link?url=Tg3nxejvD2QVLLkjKa_4XaQoOWSPAVpR1FgHAG_gANcamtN2cYIm1r1irNw9VZ816FBrMEvdoYqwzixqdHd5e_",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度百科-RBAC"),a("OutboundLink")],1),t._v(" ,也可以看看我的介绍。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Who")]),t._v("：是权限的拥有者或主体（如：User，Role）。")]),t._v(" "),a("li",[a("code",[t._v("What")]),t._v("：是操作或对象（operation，object）。")]),t._v(" "),a("li",[a("code",[t._v("How")]),t._v("：具体的权限（Privilege,正向授权与负向授权）。")])])]),t._v(" "),a("h3",{attrs:{id:"_2-1-abac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-abac"}},[t._v("#")]),t._v(" 2.1 ABAC")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("ABAC介绍")]),t._v(" "),a("p",[t._v("ABAC（Attribute Base Access Control） 基于属性的权限控制，不同于常见的将用户通过某种方式关联到权限的方式，ABAC则是通过动态计算一个或一组属性来是否满足某种条件来进行授权判断（可以编写简单的逻辑）。属性通常来说分为四类：用户属性（如用户年龄），环境属性（如当前时间），操作属性（如读取）和对象属性（如一篇文章，又称资源属性），所以理论上能够实现非常灵活的权限控制，几乎能满足所有类型的需求。\n访问控制列表(**ACL **)是一种基于包过滤的"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%8A%80%E6%9C%AF/5652430",target:"_blank",rel:"noopener noreferrer"}},[t._v("访问控制技术"),a("OutboundLink")],1),t._v("，它可以根据设定的条件对接口上的数据包进行过滤，允许其通过或丢弃。访问控制列表被广泛地应用于"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E5%99%A8/108294",target:"_blank",rel:"noopener noreferrer"}},[t._v("路由器"),a("OutboundLink")],1),t._v("和三层"),a("a",{attrs:{href:"https://baike.baidu.com/item/%E4%BA%A4%E6%8D%A2%E6%9C%BA/103532",target:"_blank",rel:"noopener noreferrer"}},[t._v("交换机"),a("OutboundLink")],1),t._v("，借助于访问控制列表，可以有效地控制用户对网络的访问，从而最大程度地保障网络安全。")])]),t._v(" "),a("h3",{attrs:{id:"_2-3-采坑bug修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-采坑bug修改"}},[t._v("#")]),t._v(" 2.3 采坑bug修改")]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"bug",href:"/img/goImage/bug1.png"}},[a("img",{attrs:{src:"/img/goImage/bug1.png",alt:"bug"}})])]),t._v(" "),a("p",[t._v("将url.go 中的\n"),a("a",{attrs:{"data-fancybox":"",title:"bug1xxiu",href:"/img/goImage/bug1xxiu.png"}},[a("img",{attrs:{src:"/img/goImage/bug1xxiu.png",alt:"bug1xxiu"}})])]),t._v(" "),a("p",[t._v("修改为\n"),a("a",{attrs:{"data-fancybox":"",title:"bug1xiu",href:"/img/goImage/bug1xiu.png"}},[a("img",{attrs:{src:"/img/goImage/bug1xiu.png",alt:"bug1xiu"}})])]),t._v(" "),a("p",[t._v("这个问题存在是由于应用源码对字符串的解析问题，可以不写端口，采用默认的端口")]),t._v(" "),a("h2",{attrs:{id:"_3-项目运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-项目运行"}},[t._v("#")]),t._v(" 3 项目运行")]),t._v(" "),a("blockquote",[a("p",[t._v("官方代码下载后编译成keto.exe执行，直接执行指挥出现提示页面")])]),t._v(" "),a("h3",{attrs:{id:"_3-1-代码示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-代码示例"}},[t._v("#")]),t._v(" 3.1 代码示例")]),t._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dsn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("minda123@tcp(127.0.0.1)/keto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("?")]),t._v("parseTime=true"),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&multiStatements=true")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里如果用默认端口就不要加端口号：3306")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("secrets")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("system")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" admin1\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" admin2\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" admin3\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("keto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exe "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("awesomeProject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yaml migrate sql "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e\n      \ntime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-25T16:27:28+08:00"')]),t._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Connecting with mysql://*:*@tcp(127.0.0.1)/keto?multiStatements=true"')]),t._v("\ntime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-25T16:27:28+08:00"')]),t._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Connected to SQL!"')]),t._v("\ntime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-25T16:27:28+08:00"')]),t._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Applying storage SQL migrations..."')]),t._v("\ntime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-25T16:27:28+08:00"')]),t._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Successfully applied SQL migrations"')]),t._v(" applied_migrations"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" migration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("name\ntime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-25T16:27:28+08:00"')]),t._v(" level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Done applying storage SQL migrations"')]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h3",{attrs:{id:"_3-2-启动服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-启动服务"}},[t._v("#")]),t._v(" 3.2 启动服务")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("serve "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("awesomeProject"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yaml\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-3-项目api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-项目api"}},[t._v("#")]),t._v(" 3.3 项目API")]),t._v(" "),a("p",[a("a",{staticStyle:{display:"block","margin-block-start":"1em","margin-block-end":"1em","margin-inline-start":"0px","margin-inline-end":"0px"},attrs:{href:"/go/middleware/go-swagger.html"}},[a("strong",[t._v("swagger安装教程")])])]),t._v(" "),a("blockquote",[a("p",[t._v("进入项目根目录，启动swagger服务")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("swagger serve "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("F"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("swagger F"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\\awesomeProject\\src\\github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com\\ory\\keto\\docs\\api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("swagger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("运行成功后会提示服务运行在的地址，点击进入即可看到如下页面：")]),t._v(" "),a("a",{attrs:{"data-fancybox":"",title:"canvas",href:"/img/goImage/canvas.png"}},[a("img",{attrs:{src:"/img/goImage/canvas.png",alt:"canvas"}})])]),t._v(" "),a("h3",{attrs:{id:"_3-4-主要是要用的访问策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-主要是要用的访问策略"}},[t._v("#")]),t._v(" 3.4 主要是要用的访问策略")]),t._v(" "),a("h4",{attrs:{id:"acl："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acl："}},[t._v("#")]),t._v(" ACL：")]),t._v(" "),a("p",[t._v("访问控制列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("blog_post.create")]),t._v(" "),a("th",[t._v("blog_post.delete")]),t._v(" "),a("th",[t._v("blog_post.modify")]),t._v(" "),a("th",[t._v("blog_post.read")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Alice")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("yes")])]),t._v(" "),a("tr",[a("td",[t._v("Bob")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("yes")])]),t._v(" "),a("tr",[a("td",[t._v("Peter")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("yes")])])])]),t._v(" "),a("h4",{attrs:{id:"rbac："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rbac："}},[t._v("#")]),t._v(" RBAC：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://d33wubrfki0l68.cloudfront.net/bedd59da2bde604df342c288215d5646909dd06d/32c0e/images/docs/keto/rbac.png",alt:"RBAC"}})]),t._v(" "),a("h2",{attrs:{id:"_4-ory-access-control-policies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-ory-access-control-policies"}},[t._v("#")]),t._v(" 4 ORY Access Control Policies")]),t._v(" "),a("h3",{attrs:{id:"_4-1-策略准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-策略准备"}},[t._v("#")]),t._v(" 4.1 策略准备")]),t._v(" "),a("blockquote",[a("p",[t._v("put请求：http://127.0.0.1:4444//engines/acp/ory/glob/policies")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subjects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alice"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resources"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:my-first-blog-post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"actions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"effect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allow"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("同样：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subjects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"alice"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bob"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resources"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:my-first-blog-post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:3"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"actions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"create"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"modify"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"effect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allow"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("会在数据库生成新的记录")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subjects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"peter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resources"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:my-first-blog-post"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog_posts:3"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"actions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"create"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"modify"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"effect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deny"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("The "),a("code",[t._v(":")]),t._v(" is a delimiter in ORY Access Control Policies. Other supported syntax\nis:")]),t._v(" "),a("p",[a("strong",[t._v("single symbol wildcard:")]),t._v(" "),a("code",[t._v("?at")]),t._v(" matches "),a("code",[t._v("cat")]),t._v(" and "),a("code",[t._v("bat")]),t._v(" but not "),a("code",[t._v("at")]),t._v(" "),a("strong",[t._v("wildcard:")]),t._v(" "),a("code",[t._v("foo:*:bar")]),t._v(" matches "),a("code",[t._v("foo:baz:bar")]),t._v(" and "),a("code",[t._v("foo:zab:bar")]),t._v(" but not\n"),a("code",[t._v("foo:bar")]),t._v(" nor "),a("code",[t._v("foo:baz:baz:bar")]),t._v(" "),a("strong",[t._v("super wildcard:")]),t._v(" "),a("code",[t._v("foo:**:bar")]),t._v(" matches "),a("code",[t._v("foo:baz:baz:bar")]),t._v(", "),a("code",[t._v("foo:baz:bar")]),t._v(", and\n"),a("code",[t._v("foo:bar")]),t._v(", but not "),a("code",[t._v("foobar")]),t._v(" or "),a("code",[t._v("foo:baz")]),t._v(" "),a("strong",[t._v("character list:")]),t._v(" "),a("code",[t._v("[cb]at")]),t._v(" matches "),a("code",[t._v("cat")]),t._v(" and "),a("code",[t._v("bat")]),t._v(" but not "),a("code",[t._v("mat")]),t._v(" nor "),a("code",[t._v("at")]),t._v(".\n"),a("strong",[t._v("negated character list:")]),t._v(" "),a("code",[t._v("[!cb]at")]),t._v(" matches "),a("code",[t._v("tat")]),t._v(" and "),a("code",[t._v("mat")]),t._v(" but not "),a("code",[t._v("cat")]),t._v("\nnor "),a("code",[t._v("bat")]),t._v(".\n"),a("strong",[t._v("ranged character list:")]),t._v(" "),a("code",[t._v("[a-c]at")]),t._v(" "),a("code",[t._v("cat")]),t._v(" and "),a("code",[t._v("bat")]),t._v(" but not "),a("code",[t._v("mat")]),t._v(" nor "),a("code",[t._v("at")]),t._v(".\n"),a("strong",[t._v("negated ranged character list:")]),t._v(" "),a("code",[t._v("[!a-c]at")]),t._v(" matches "),a("code",[t._v("mat")]),t._v(" and "),a("code",[t._v("tat")]),t._v(" but not\n"),a("code",[t._v("cat")]),t._v(" nor "),a("code",[t._v("bat")]),t._v(".\n"),a("strong",[t._v("alternatives list:")]),t._v(" "),a("code",[t._v("{cat,bat,[mt]at}")]),t._v(" matches "),a("code",[t._v("cat")]),t._v(", "),a("code",[t._v("bat")]),t._v(", "),a("code",[t._v("mat")]),t._v(", "),a("code",[t._v("tat")]),t._v("\nand nothing else.\n"),a("strong",[t._v("backslash:")]),t._v(" "),a("code",[t._v("foo\\\\bar")]),t._v(" matches "),a("code",[t._v("foo\\bar")]),t._v(" and nothing else. "),a("code",[t._v("foo\\bar")]),t._v("\nmatches "),a("code",[t._v("foobar")]),t._v(" and nothing else. "),a("code",[t._v("foo\\*bar")]),t._v(" matches "),a("code",[t._v("foo*bar")]),t._v(" and nothing\nelse. Please note that when using JSON you need to double escape backslashes:\n"),a("code",[t._v("foo\\\\bar")]),t._v(" becomes "),a("code",[t._v('{"...": "foo\\\\\\\\bar"}')]),t._v(".")]),t._v(" "),a("p",[t._v("The pattern syntax is:")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("  pattern"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" term "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  term"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n      *         matches any sequence of non-separator characters\n\n      **        matches any sequence of characters\n\n      ?         matches any single non-separator character\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" ! "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" character-range "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n                  character class (must be non-empty)\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pattern-list "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n                  pattern alternatives\n\n      c           matches character c (c != *"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" **"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")\n\n      \\ c       matches character c\n\n  character-range"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n      c           matches character c (c != \\\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(")\n\n      \\ c       matches character c\n\n      lo - hi   matches character c for lo <= c <= hi\n\n  pattern-list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n\n      pattern "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pattern "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n                  comma-separated (without spaces) pattern\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br")])]),a("h3",{attrs:{id:"_4-2-json实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-json实例"}},[t._v("#")]),t._v(" 4.2 json实例")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"One policy to rule them all."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"subjects"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"users:maria:*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"actions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"create"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"update"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"modify"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"read"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"effect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allow"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"resources"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resources:articles:<.*>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"conditions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"someKeyName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StringMatchCondition"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"matches"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo.+"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"someKey"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StringPairsEqualCondition"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"myKey"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"StringEqualCondition"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"equals"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"expected-value"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      \n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"remoteIPAddress"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CIDRCondition"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cidr"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.0/16"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"this-key-will-be-matched-with-the-context"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SomeConditionType"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"options"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"some"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"configuration options set by the condition type"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"context"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"someKey"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br")])]),a("h3",{attrs:{id:"_4-3-主要请求及其说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-主要请求及其说明"}},[t._v("#")]),t._v(" 4.3 主要请求及其说明")]),t._v(" "),a("h4",{attrs:{id:"参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[t._v("#")]),t._v(" 参数说明")]),t._v(" "),a("h4",{attrs:{id:"响应参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应参数说明"}},[t._v("#")]),t._v(" 响应参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Restrictions")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("integer(int64)")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("details")]),t._v(" "),a("td",[t._v("[object]")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("additionalProperties")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("reason")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("request")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("status")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])])])]),t._v(" "),a("h4",{attrs:{id:"请求参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求参数说明"}},[t._v("#")]),t._v(" 请求参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("In")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Required")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("flavor")]),t._v(" "),a("td",[t._v("path")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),a("td",[t._v('The ORY Access Control Policy flavor. Can be "regex", "glob", and "exact".')])])])]),t._v(" "),a("h3",{attrs:{id:"_4-4-检查请求是否允许通过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-检查请求是否允许通过"}},[t._v("#")]),t._v(" 4.4 检查请求是否允许通过")]),t._v(" "),a("p",[t._v("请求头")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("POST /engines/acp/ory/{flavor}/allowed HTTP/1.1\n\nContent-Type: application/json\n\nAccept: application/json\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("body")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "action": "string",\n  "context": {\n    "property1": {},\n    "property2": {}\n  },\n  "resource": "string",\n  "subject": "string"\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"_4-5-参数列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-参数列表"}},[t._v("#")]),t._v(" 4.5 参数列表")]),t._v(" "),a("p",[t._v("OryAccessControlPolicyAllowedInput*")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Restrictions")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Action is the action that is requested on the resource.")])]),t._v(" "),a("tr",[a("td",[t._v("context")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Context is the request's environmental context.")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("additionalProperties")])]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("resource")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Resource is the resource that access is requested to.")])]),t._v(" "),a("tr",[a("td",[t._v("subject")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Subject is the subject that is requesting access.")])])])]),t._v(" "),a("p",[t._v("response")]),t._v(" "),a("p",[a("code",[t._v('{"allowed":"true"}')]),t._v("  or "),a("code",[t._v('{"allowed":"false"}')])]),t._v(" "),a("h2",{attrs:{id:"_5-访问控制策略操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-访问控制策略操作"}},[t._v("#")]),t._v(" 5 访问控制策略操作")]),t._v(" "),a("h3",{attrs:{id:"_5-1-获取访问控制策略集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-获取访问控制策略集合"}},[t._v("#")]),t._v(" 5.1 获取访问控制策略集合")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /engines/acp/ory/{flavor}/policies HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("参数列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("In")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("flavor")]),t._v(" "),a("td",[t._v("path")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v('The ORY Access Control Policy flavor. Can be "regex", "glob", and "exact"')])]),t._v(" "),a("tr",[a("td",[t._v("limit")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("integer(int64)")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The maximum amount of policies returned.")])]),t._v(" "),a("tr",[a("td",[t._v("offset")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("integer(int64)")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The offset from where to start looking.")])]),t._v(" "),a("tr",[a("td",[t._v("subject")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The subject for whom the policies are to be listed.")])]),t._v(" "),a("tr",[a("td",[t._v("resource")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The resource for which the policies are to be listed.")])]),t._v(" "),a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The action for which policies are to be listed.")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-2-更新访问控制策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-更新访问控制策略"}},[t._v("#")]),t._v(" 5.2 更新访问控制策略")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("PUT "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("engines"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("acp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ory"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("flavor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("policies HTTP"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v("\nContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("json\nAccept"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" application"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("参数列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[a("strong",[t._v("Restrictions")])]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("actions")]),t._v(" "),a("td",[t._v("[string]")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Actions is an array representing all the actions this ORY Access Policy applies to.")])]),t._v(" "),a("tr",[a("td",[t._v("conditions")]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Conditions represents a keyed object of conditions under which this ORY Access Policy is active.")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("additionalProperties")])]),t._v(" "),a("td",[t._v("object")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("none")])]),t._v(" "),a("tr",[a("td",[t._v("description")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Description is an optional, human-readable description.")])]),t._v(" "),a("tr",[a("td",[t._v("effect")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v('Effect is the effect of this ORY Access Policy. It can be "allow" or "deny".')])]),t._v(" "),a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("访问策略的唯一标识，用来查询，更新和删除")])]),t._v(" "),a("tr",[a("td",[t._v("resources")]),t._v(" "),a("td",[t._v("[string]")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Resources is an array representing all the resources this ORY Access Policy applies to.")])]),t._v(" "),a("tr",[a("td",[t._v("subjects")]),t._v(" "),a("td",[t._v("[string]")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("none")]),t._v(" "),a("td",[t._v("Subjects is an array representing all the subjects this ORY Access Policy applies to.")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-3-查询具体的策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-查询具体的策略"}},[t._v("#")]),t._v(" 5.3 查询具体的策略")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /engines/acp/ory/{flavor}/policies/{id} HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_5-4-删除访问控制策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-删除访问控制策略"}},[t._v("#")]),t._v(" 5.4  删除访问控制策略")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("DELETE /engines/acp/ory/{flavor}/policies/{id} HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"_6-访问控制策略角色操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-访问控制策略角色操作"}},[t._v("#")]),t._v(" 6 访问控制策略角色操作")]),t._v(" "),a("h3",{attrs:{id:"_6-1-查询寻访问控制角色集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-查询寻访问控制角色集合"}},[t._v("#")]),t._v(" 6.1 查询寻访问控制角色集合")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /engines/acp/ory/{flavor}/roles HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("参数说明：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("In")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("flavor")]),t._v(" "),a("td",[t._v("path")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v('The ORY Access Control Policy flavor. Can be "regex", "glob", and "exact"')])]),t._v(" "),a("tr",[a("td",[t._v("limit")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("integer(int64)")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The maximum amount of policies returned.")])]),t._v(" "),a("tr",[a("td",[t._v("offset")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("integer(int64)")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The offset from where to start looking.")])]),t._v(" "),a("tr",[a("td",[t._v("member")]),t._v(" "),a("td",[t._v("query")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("The member for which the roles are to be listed.")])])])]),t._v(" "),a("h3",{attrs:{id:"_6-2-添加访问控制的角色"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-添加访问控制的角色"}},[t._v("#")]),t._v(" 6.2 添加访问控制的角色")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PUT /engines/acp/ory/{flavor}/roles HTTP/1.1\nContent-Type: application/json\nAccept: application/json\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("例子：")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n  "id": "string",\n  "members": ["string"]\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("参数列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Parameter")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("id")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("ID is the role's unique id.")])]),t._v(" "),a("tr",[a("td",[t._v("members")]),t._v(" "),a("td",[t._v("[string]")]),t._v(" "),a("td",[t._v("false")]),t._v(" "),a("td",[t._v("Members is who belongs to the role.")])])])]),t._v(" "),a("h3",{attrs:{id:"_6-3-获取访问控制角色信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-获取访问控制角色信息"}},[t._v("#")]),t._v(" 6.3 获取访问控制角色信息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /engines/acp/ory/{flavor}/roles/{id} HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_6-4-删除访问控制角色信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-删除访问控制角色信息"}},[t._v("#")]),t._v(" 6.4 删除访问控制角色信息")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("DELETE  /engines/acp/ory/{flavor}/roles/{id} HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_6-5-为角色添加用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-为角色添加用户"}},[t._v("#")]),t._v(" 6.5 为角色添加用户")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('PUT /engines/acp/ory/{flavor}/roles/{id}/members HTTP/1.1 Content-Type: application/json Accept: application/json\n\n请求体：\n{\n  "members": ["string"]\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"_6-6从角色中删除某个用户成员"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6从角色中删除某个用户成员"}},[t._v("#")]),t._v(" 6.6从角色中删除某个用户成员")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("DELETE /engines/acp/ory/{flavor}/roles/{id}/members/{member} HTTP/1.1 Accept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_7-健康检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-健康检查"}},[t._v("#")]),t._v(" 7 健康检查")]),t._v(" "),a("h3",{attrs:{id:"_7-1-检查存活状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-检查存活状态"}},[t._v("#")]),t._v(" 7.1 检查存活状态")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /health/alive HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("结果：（官方说明总是ok）")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{  "status": "ok" }\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-2-检查准备就绪"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-检查准备就绪"}},[t._v("#")]),t._v(" 7.2 检查准备就绪")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /health/ready HTTP/1.1\nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"_7-3-获取当前版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-获取当前版本"}},[t._v("#")]),t._v(" 7.3 获取当前版本")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GET /version HTTP/1.1 \nAccept: application/json\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h2",{attrs:{id:"_8-测试样例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-测试样例"}},[t._v("#")]),t._v(" 8 测试样例")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('put   http://127.0.0.1:4444/engines/acp/ory/glob/policies\n\n{\n  "actions": ["get","create","modify","delete"],\n  "conditions": {\n    "optionAccess": {\n    \t"type": "CIDRCondition",\n    \t"options": {\n        "cidr": "192.168.0.0/16"\n      }\n    }\n  },\n  "description": "test q",\n  "effect": "allow",\n  "id": "string",\n  "resources": [ \n  \t"blog_posts:my-first-blog-post",\n    "blog_posts:2",\n    "blog_posts:3"],\n  "subjects": ["admin","admin1","admin2"]\n}\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br")])]),t._v(" "),a("src-comment")],1)}),[],!1,null,null,null);s.default=e.exports}}]);