(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{473:function(t,s,a){"use strict";a.r(s);var e=a(18),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"go语言包和包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#go语言包和包管理"}},[t._v("#")]),t._v(" Go语言包和包管理")]),t._v(" "),a("p",[a("a",{attrs:{"data-fancybox":"",title:"goModel",href:"/img/goImage/gomodel.png"}},[a("img",{attrs:{src:"/img/goImage/gomodel.png",alt:"goModel"}})])]),t._v(" "),a("h2",{attrs:{id:"_1-包简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-包简介"}},[t._v("#")]),t._v(" 1 包简介")]),t._v(" "),a("h3",{attrs:{id:"_1-1-工作空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-工作空间"}},[t._v("#")]),t._v(" 1.1 工作空间")]),t._v(" "),a("blockquote",[a("p",[t._v("go语言的工作空间必须由 bin、pkg、src三个目录组成,可以在"),a("code",[t._v("GOPATH")]),t._v("环境变量中添加多个工作空间，但不能和"),a("code",[t._v("GOROOT")]),t._v("相同。通常"),a("code",[t._v("go get")]),t._v("使用第一个工作空间保存下载的第三方库")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("workspace\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" bin "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// go install 安装目录。")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" learn\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" pkg "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// go build ⽣成静态库 (.a) 存放目录。")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" darwin_amd64\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" mylib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" mylib\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\t\t\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\t\t\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" sublib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" src "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目源码目录。")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" learn\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" \t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" mylib\n\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" mylib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v("\n\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" sublib\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n\t\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" sublib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("g\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br")])]),a("h3",{attrs:{id:"_1-2-源文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-源文件"}},[t._v("#")]),t._v(" 1.2 源文件")]),t._v(" "),a("ul",[a("li",[t._v("编码：源码⽂件必须是 UTF-8 格式，否则会导致编译器出错。")]),t._v(" "),a("li",[t._v("结束：语句以 “;” 结束，多数时候可以省略。")]),t._v(" "),a("li",[t._v("注释：⽀持 “//”、 “/**/” 两种注释⽅式，不能嵌套。")]),t._v(" "),a("li",[t._v("命名：采⽤ camelCasing ⻛格，不建议使⽤下划线。")])]),t._v(" "),a("h3",{attrs:{id:"_1-3-包命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-包命名"}},[t._v("#")]),t._v(" 1.3 包命名")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("包命名惯例")]),t._v(" "),a("ul",[a("li",[t._v("给包命名的惯例是使用包所在目录的名字。这让用户在导入包的时候，就能清晰地知道包名。")]),t._v(" "),a("li",[t._v("尽量使用简介明了的名字，但要避免冲突")]),t._v(" "),a("li",[t._v("包名一般使用单数的形式，但是避免冲突的用的复数比如bytes，errors，strings等")]),t._v(" "),a("li",[t._v("要避免包名有其他含义。比如 temp这种")]),t._v(" "),a("li",[t._v("命名时考虑包名和成员如何配合，尽量减少包名和成员有重复")])])]),t._v(" "),a("h3",{attrs:{id:"_1-4-main-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-main-包"}},[t._v("#")]),t._v(" 1.4 main 包")]),t._v(" "),a("ul",[a("li",[t._v("所有用 Go 语言编译的可执行程序都必须有一个名叫 main 的包。 go语言的编译器会将这种名字的包编译为二进制可执行文件。")]),t._v(" "),a("li",[t._v("main包下肯定会有名为main()的函数，main()是程序的入口。")]),t._v(" "),a("li",[t._v("编译完会使用声明 main 包的代码所在的目录的目录名作为二进制可执行文件的文件名")])]),t._v(" "),a("h2",{attrs:{id:"_2导包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2导包"}},[t._v("#")]),t._v(" 2导包")]),t._v(" "),a("blockquote",[a("p",[t._v("关键字 Import ，进行导包。未使用的导入包，会编译错误。")])]),t._v(" "),a("h3",{attrs:{id:"_2-1-两种方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-两种方式"}},[t._v("#")]),t._v(" 2.1 两种方式")]),t._v(" "),a("blockquote",[a("p",[t._v("import a import b,…多次导入，以及import(a b c) 批量导入，如果导入的包不使用会报错。")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("h3",{attrs:{id:"_2-2-包的别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-包的别名"}},[t._v("#")]),t._v(" 2.2 包的别名")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tio "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nio"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//别名可以直接用，在包重名时很有用")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_2-3-简洁模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-简洁模式"}},[t._v("#")]),t._v(" 2.3 简洁模式")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//但是为了别人好看，一般还是不用这种")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h3",{attrs:{id:"_2-4非导入模式-匿名导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4非导入模式-匿名导入"}},[t._v("#")]),t._v(" 2.4非导入模式(匿名导入)")]),t._v(" "),a("blockquote",[a("p",[t._v("即导入一个包并不使用它。如果不加_,就会出现编译错误。 在这里用下划线 _ 重命名导入的包。只导入，不使用。\n但是这个包它进行了初始化，一般在"),a("code",[t._v("init")]),t._v("函数调用，这样做的好处是，有些包我们不显示使用它，但是有可能用到它，或者由用户选择使用哪个。比如 对特定图像驱动包的初始化，在我们格式化转换图片用到。还有 "),a("code",[t._v("database/sql")]),t._v("包，可以先都初始化，让用户选择不同的数据库驱动。")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//非导入模式：仅让该包执行初始化函数")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-5-导包的路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-导包的路径"}},[t._v("#")]),t._v(" 2.5 导包的路径")]),t._v(" "),a("blockquote",[a("p",[t._v("一般情况下是包的相对路径。比如"),a("code",[t._v('import "learn/test"')]),t._v(",标准库中的包会在安装 Go 的位置找到，即"),a("code",[t._v("GOROOT")]),t._v("。 Go 开发者创建的包会在 "),a("code",[t._v("GOPATH")]),t._v("环境变量指定的目录里查找。"),a("code",[t._v("GOPATH")]),t._v(" 指定的这些目录就是开发者的个人工作空间。")])]),t._v(" "),a("h3",{attrs:{id:"_2-6-远程导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-远程导入"}},[t._v("#")]),t._v(" 2.6 远程导入")]),t._v(" "),a("blockquote",[a("p",[t._v("目前的大势所趋是，使用分布式版本控制系统"),a("code",[t._v("（Distributed Version Control Systems， DVCS）")]),t._v("\n来分享代码，如"),a("code",[t._v("GitHub")]),t._v("、 "),a("code",[t._v("Launchpad")]),t._v(" 还有 "),a("code",[t._v("Bitbucket")]),t._v("。 Go 语言的工具链本身就支持从这些网站及\n类似网站获取源代码。 Go 工具链会使用导入路径确定需要获取的代码在网络的什么地方。 比如："),a("code",[t._v('import "github.com/xxxx/xxx"')]),t._v(",用导入路径编译程序时，\ngo build 命令会使用 "),a("code",[t._v("GOPATH")]),t._v("的设置，在磁盘上搜索这个包。事实上，\n这个导入路径代表一个URL，指向 "),a("code",[t._v("GitHub")]),t._v("上的代码库。如果路径包含 URL，可以使用 Go 工具链从\n"),a("code",[t._v("DVCS")]),t._v(" 获取包，并把包的源代码保存在"),a("code",[t._v("GOPATH")]),t._v("指向的路径里与 URL 匹配的目录里。这个获取过程\n使用 go get 命令完成。 go get 将获取任意指定的 URL 的包，或者一个已经导入的包所依赖的其\n他包。由于 go get的这种递归特性，这个命令会扫描某个包的源码树，获取能找到的所有依赖包。")])]),t._v(" "),a("h2",{attrs:{id:"_3-初始化-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-初始化-init"}},[t._v("#")]),t._v(" 3 初始化 init")]),t._v(" "),a("blockquote",[a("p",[t._v("每个包可以包含任意多个 init 函数，这些函数都会在程序执行开始的时候被调用。所有被编译器发现的 init 函数都会安排在 main 函数之前执行。\ninit 函数用在设置包、初始化变量或者其他要在程序运行前优先完成的引导工作。举例如下")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" postgres\n\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"database/sql"')]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//初始化函数")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//这里省略。。")]),t._v("\n\t sql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"postgres"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PostgresDriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"_3-1-init总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-init总结"}},[t._v("#")]),t._v(" 3.1 init总结")]),t._v(" "),a("ul",[a("li",[t._v("每个源⽂件都可以定义⼀个或多个初始化函数。")]),t._v(" "),a("li",[t._v("编译器不保证多个初始化函数执行次序。")]),t._v(" "),a("li",[t._v("初始化函数在单⼀线程被调用，仅执行⼀次。")]),t._v(" "),a("li",[t._v("初始化函数在包所有全局变量初始化后执行。")]),t._v(" "),a("li",[t._v("在所有初始化函数结束后才执行 main.main。")]),t._v(" "),a("li",[t._v("无法调用初始化函数。")])]),t._v(" "),a("h2",{attrs:{id:"_4-包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-包管理"}},[t._v("#")]),t._v(" 4 包管理")]),t._v(" "),a("h3",{attrs:{id:"_4-1-演变过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-演变过程"}},[t._v("#")]),t._v(" 4.1 演变过程")]),t._v(" "),a("ul",[a("li",[t._v("2013年:Gedep,社区第一个包管理工具")]),t._v(" "),a("li",[t._v("2015年:vendor,Golang官方(golang1.5)")]),t._v(" "),a("li",[t._v("2016、2017 年:dep、manul、Godep、Govendor、godm （Govendor胜出）")]),t._v(" "),a("li",[t._v("go module是Go1.11版本之后官方推出的版本管理工具，并且从Go1.13版本开始，go module将是Go语言默认的依赖管理工具。")])]),t._v(" "),a("h3",{attrs:{id:"_4-2-go-model优点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-go-model优点"}},[t._v("#")]),t._v(" 4.2 Go Model优点")]),t._v(" "),a("ul",[a("li",[t._v("不必须将项目目录放在GOPATH中")]),t._v(" "),a("li",[t._v("不使用vendor目录，而是统一安装到$GOPATH/pkg/mod/cache")]),t._v(" "),a("li",[t._v("build/run时，自动析出项目import的包并安装")])]),t._v(" "),a("h3",{attrs:{id:"_4-3-启用go-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-启用go-module"}},[t._v("#")]),t._v(" 4.3 启用go module")]),t._v(" "),a("blockquote",[a("p",[t._v("要启用"),a("code",[t._v("go module")]),t._v("支持首先要设置环境变量"),a("code",[t._v("GO111MODULE")]),t._v("，通过它可以开启或关闭模块支持，它有三个可选值：off、on、auto，默认值是auto。\n设置"),a("code",[t._v("GO111MODULE=on")]),t._v("之后就可以使用"),a("code",[t._v("go module")]),t._v("了，以后就没有必要在"),a("code",[t._v("GOPATH")]),t._v("中创建项目了，并且还能够很好的管理项目依赖的第三方包信息。\n使用 "),a("code",[t._v("go module")]),t._v(" 管理依赖后会在项目根目录下生成两个文件"),a("code",[t._v("go.mod")]),t._v("和"),a("code",[t._v("go.sum")]),t._v("。")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("GO111MODULE=off")]),t._v("禁用模块支持,编译时会从"),a("code",[t._v("GOPATH")]),t._v("和"),a("code",[t._v("vendor")]),t._v("文件夹中查找包。")]),t._v(" "),a("li",[a("code",[t._v("GO111MODULE=on")]),t._v("启用模块支持,编译时会忽略"),a("code",[t._v("GOPATH")]),t._v("和"),a("code",[t._v("vendor")]),t._v("文件夹,只根据 "),a("code",[t._v("go.mod")]),t._v("下载依赖。")]),t._v(" "),a("li",[a("code",[t._v("GO111MODULE=auto")]),t._v(",当项目在"),a("code",[t._v("$GOPATH/src")]),t._v("外且项目根目录有"),a("code",[t._v("go.mod")]),t._v("文件时,开启模块支持。")])]),t._v(" "),a("h3",{attrs:{id:"_4-4-goproxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-goproxy"}},[t._v("#")]),t._v(" 4.4 GOPROXY")]),t._v(" "),a("blockquote",[a("p",[t._v("Go1.13之后"),a("code",[t._v("GOPROXY")]),t._v("默认值为"),a("a",{attrs:{href:"https://proxy.golang.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://proxy.golang.org"),a("OutboundLink")],1),t._v("，在国内是无法访问的，所以十分建议大家设置"),a("code",[t._v("GOPROXY")]),t._v("，详细设置请参考"),a("RouterLink",{attrs:{to:"/go/middleware/goproxy.html"}},[t._v("设置GOPROXY教程")])],1)]),t._v(" "),a("h2",{attrs:{id:"_5-go-mod详解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-go-mod详解"}},[t._v("#")]),t._v(" 5 go mod详解")]),t._v(" "),a("h3",{attrs:{id:"_5-1-go-mod命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-go-mod命令"}},[t._v("#")]),t._v(" 5.1 go mod命令")]),t._v(" "),a("blockquote",[a("p",[t._v("常用的go mod命令如下：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("go mod命令")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod download")]),t._v(" "),a("td",[t._v("下载依赖的module到本地cache（默认为$GOPATH/pkg/mod目录）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod edit")]),t._v(" "),a("td",[t._v("编辑go.mod文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod graph")]),t._v(" "),a("td",[t._v("打印模块依赖图")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod init")]),t._v(" "),a("td",[t._v("初始化当前文件夹, 创建go.mod文件")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod tidy")]),t._v(" "),a("td",[t._v("增加缺少的module，删除无用的module")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod vendor")]),t._v(" "),a("td",[t._v("将依赖复制到vendor下")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod verify")]),t._v(" "),a("td",[t._v("校验依赖")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("go mod why")]),t._v(" "),a("td",[t._v("解释为什么需要依赖")])])])]),t._v(" "),a("h3",{attrs:{id:"_5-2-go-mod说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-go-mod说明"}},[t._v("#")]),t._v(" 5.2 go.mod说明")]),t._v(" "),a("p",[a("code",[t._v("go.mod")]),t._v("文件记录了项目所有的依赖信息，其结构大致如下：")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("module github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ourlang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("studygo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("myblog\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.13")]),t._v("\n\nrequire "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tgithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("DeanThompson"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("ginpprof v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20190408063150")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("be636683586\n\tgithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("gonic"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("gin v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.0")]),t._v("\n\tgithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("sql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysql v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),t._v("\n\tgithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jmoiron"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sqlx v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v("\n\tgithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("satori"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uuid v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.0")]),t._v("\n\tgoogle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("appengine v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// indirect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("ul",[a("li",[t._v("module用来定义包名")]),t._v(" "),a("li",[t._v("require用来定义依赖包及版本")]),t._v(" "),a("li",[t._v("indirect表示间接引用")])]),t._v(" "),a("h4",{attrs:{id:"_5-2-1-依赖的版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-依赖的版本"}},[t._v("#")]),t._v(" 5.2.1 依赖的版本")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("go mod")]),t._v("支持语义化版本号，比如"),a("code",[t._v("go get foo@v1.2.3")]),t._v("，也可以跟git的分支或tag，比如"),a("code",[t._v("go get foo@master")]),t._v("，当然也可以跟git提交哈希，比如"),a("code",[t._v("go get foo@e3702bed2")]),t._v("。关于依赖的版本支持以下几种格式：")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("gopkg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tomb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v1 v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20141024135613")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dd632973f1e7\ngopkg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("vmihailenco"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("msgpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v2 v2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9.1")]),t._v("\ngopkg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("in"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("yaml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("v2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v("v2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.1")]),t._v("\ngithub"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tatsushid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("fastping v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20160109021039")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d7bb493dee3e\nlatest\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h4",{attrs:{id:"_5-2-2-replace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-replace"}},[t._v("#")]),t._v(" 5.2.2 replace")]),t._v(" "),a("blockquote",[a("p",[t._v("在国内访问"),a("code",[t._v("golang.org/x")]),t._v("的各个包都需要翻墙，你可以在"),a("code",[t._v("go.mod")]),t._v("中使用"),a("code",[t._v("replace")]),t._v("替换成"),a("code",[t._v("github")]),t._v("上对应的库。")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("replace "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\tgolang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20180820150726")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("614")]),t._v("d502a4dac "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("crypto v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20180820150726")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("614")]),t._v("d502a4dac\n\tgolang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("net v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20180821023952")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("922")]),t._v("f4815f713 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("net v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20180826012351")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("a410e7b638d\n\tgolang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text v0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"_5-3-go-get"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-go-get"}},[t._v("#")]),t._v(" 5.3 go get")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("在项目中执行go get命令可以下载依赖包，并且还可以指定下载的版本。")]),t._v(" "),a("ul",[a("li",[t._v("运行"),a("code",[t._v("go get -u")]),t._v("将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)")]),t._v(" "),a("li",[t._v("运行"),a("code",[t._v("go get -u=patch")]),t._v("将会升级到最新的修订版本")]),t._v(" "),a("li",[t._v("运行"),a("code",[t._v("go get package@version")]),t._v("将会升级到指定的版本号"),a("code",[t._v("version")])]),t._v(" "),a("li",[t._v("如果下载所有依赖可以使用"),a("code",[t._v("go mod download")]),t._v("命令。")])])]),t._v(" "),a("h4",{attrs:{id:"_5-3-1-整理依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-整理依赖"}},[t._v("#")]),t._v(" 5.3.1 整理依赖")]),t._v(" "),a("blockquote",[a("p",[t._v("我们在代码中删除依赖代码后，相关的依赖库并不会在"),a("code",[t._v("go.mod")]),t._v("文件中自动移除。这种情况下我们可以使用"),a("code",[t._v("go mod tidy")]),t._v("命令更新"),a("code",[t._v("go.mod")]),t._v("中的依赖关系")])]),t._v(" "),a("h3",{attrs:{id:"_5-4-go-mod-edit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-go-mod-edit"}},[t._v("#")]),t._v(" 5.4 go mod edit")]),t._v(" "),a("h4",{attrs:{id:"_5-4-1-格式化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-1-格式化"}},[t._v("#")]),t._v(" 5.4.1 格式化")]),t._v(" "),a("blockquote",[a("p",[t._v("因为我们可以手动修改go.mod文件，所以有些时候需要格式化该文件。Go提供了一下命令：")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" mod edit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("fmt\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_5-4-2-添加依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-2-添加依赖项"}},[t._v("#")]),t._v(" 5.4.2 添加依赖项")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" mod edit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("require"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h4",{attrs:{id:"_5-4-3-移除依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-3-移除依赖项"}},[t._v("#")]),t._v(" 5.4.3 移除依赖项")]),t._v(" "),a("blockquote",[a("p",[t._v("如果只是想修改"),a("code",[t._v("go.mod")]),t._v("文件中的内容，那么可以运行"),a("code",[t._v("go mod edit -droprequire=package path")]),t._v("，比如要在"),a("code",[t._v("go.mod")]),t._v("中移除"),a("code",[t._v("golang.org/x/text")]),t._v("包，可以使用如下命令")])]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" mod edit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("droprequire"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("golang"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("x"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("text\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"_6-项目中使用go-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-项目中使用go-module"}},[t._v("#")]),t._v(" 6 项目中使用go module")]),t._v(" "),a("h3",{attrs:{id:"_6-1-现有项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-现有项目"}},[t._v("#")]),t._v(" 6.1 现有项目")]),t._v(" "),a("p",[t._v("如果需要对一个已经存在的项目启用"),a("code",[t._v("go module")]),t._v("，可以按照以下步骤操作：")]),t._v(" "),a("ul",[a("li",[t._v("在项目目录下执行"),a("code",[t._v("go mod init")]),t._v("，生成一个"),a("code",[t._v("go.mod")]),t._v("文件。")]),t._v(" "),a("li",[t._v("执行"),a("code",[t._v("go get")]),t._v("，查找并记录当前项目的依赖，同时生成一个"),a("code",[t._v("go.sum")]),t._v("记录每个依赖库的版本和哈希值")])]),t._v(" "),a("h3",{attrs:{id:"_6-2-新项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-新项目"}},[t._v("#")]),t._v(" 6.2 新项目")]),t._v(" "),a("p",[t._v("对于一个新创建的项目，我们可以在项目文件夹下按照以下步骤操作：")]),t._v(" "),a("ul",[a("li",[t._v("执行"),a("code",[t._v("go mod init 项目名")]),t._v("命令，在当前项目文件夹下创建一个"),a("code",[t._v("go.mod")]),t._v("文件。")]),t._v(" "),a("li",[t._v("手动编辑"),a("code",[t._v("go.mod")]),t._v("中的"),a("code",[t._v("require")]),t._v("依赖项或执行"),a("code",[t._v("go get")]),t._v("自动发现、维护依赖。")])]),t._v(" "),a("src-comment")],1)}),[],!1,null,null,null);s.default=r.exports}}]);