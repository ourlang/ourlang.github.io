(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{459:function(s,a,t){"use strict";t.r(a);var n=t(18),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"go-build命令详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-build命令详解"}},[s._v("#")]),s._v(" go build命令详解")]),s._v(" "),t("h2",{attrs:{id:"_1-使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用"}},[s._v("#")]),s._v(" 1 使用")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("o 输出名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("编译标记"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("包名"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("如果参数为"),t("code",[s._v("XX.go")]),s._v("文件或文件列表，则编译为一个个单独的包。")]),s._v(" "),t("li",[s._v("当编译单个"),t("code",[s._v("main")]),s._v("包（文件），则生成可执行文件。")]),s._v(" "),t("li",[s._v("当编译单个或多个包非主包时，只构建编译包，但丢弃生成的对象（"),t("code",[s._v(".a")]),s._v("），仅用作检查包可以构建。")]),s._v(" "),t("li",[s._v("当编译包时，会自动忽略"),t("code",[s._v("_test.go")]),s._v("的测试文件。")])]),s._v(" "),t("h3",{attrs:{id:"_1-1-简单说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-简单说明"}},[s._v("#")]),s._v(" 1.1 简单说明")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("go build")]),s._v("的使用比较简洁,所有的参数都可以忽略,直到只有"),t("code",[s._v("go build")]),s._v(",这个时候意味着使用当前目录进行编译，下面的几条命令是等价的.\n都是使用当前目录编译的意思。因为我们忽略了"),t("code",[s._v("packages")]),s._v(",所以自然就使用当前目录进行编译了。")])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("从这里我们也可以推测出,"),t("code",[s._v("go build")]),s._v("本质上需要的是一个路径,让编译器可以找到哪些需要编译的"),t("code",[s._v("go")]),s._v("文件。\n"),t("code",[s._v("packages")]),s._v("其实是一个相对路径,是相对于我们定义的"),t("code",[s._v("GOROOT")]),s._v("和"),t("code",[s._v("GOPATH")]),s._v("这两个环境变量的,所以有了"),t("code",[s._v("packages")]),s._v("这个参数后,\n"),t("code",[s._v("go build")]),s._v("就可以知道哪些需要编译的"),t("code",[s._v("go")]),s._v("文件了。")])]),s._v(" "),t("h3",{attrs:{id:"_1-1-指定包的方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-指定包的方式"}},[s._v("#")]),s._v(" 1.1 指定包的方式")]),s._v(" "),t("p",[s._v("这种方式是指定包的方式，这样会明确地编译我们这个包。当然我们也可以使用通配符")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ourlang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("noutil\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ourlang"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("noutil"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p"),s._v(" "),t("h2",{attrs:{id:"_2-参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-参数"}},[s._v("#")]),s._v(" 2 参数")]),s._v(" "),t("h3",{attrs:{id:"_2-1-o"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-o"}},[s._v("#")]),s._v(" 2.1 -o")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("output 指定编译输出的名称，代替默认的包名。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-2-i"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-i"}},[s._v("#")]),s._v(" 2.2 -i")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("install 安装作为目标的依赖关系的包"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("用于增量编译提速"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-3-通用参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-通用参数"}},[s._v("#")]),s._v(" 2.3 通用参数")]),s._v(" "),t("blockquote",[t("p",[s._v("以下"),t("code",[s._v("build")]),s._v(" 参数可用在 "),t("code",[s._v("build, clean, get, install, list, run, test")])])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a\n    完全编译，不理会"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("i产生的"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a文件"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("文件会比不带"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("a的编译出来要大？"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n\n    仅打印输出build需要的命令，不执行build动作（少用）。\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p n\n    开多少核cpu来并行编译，默认为本机CPU核数（少用）。\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("race\n    同时检测数据竞争状态，只支持 linux"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" freebsd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" darwin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("amd64 和 windows"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("amd64"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("msan\n    启用与内存消毒器的互操作。仅支持linux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" amd64，并且只用Clang "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" LLVM作为主机C编译器（少用）。\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n    打印出被编译的包名（少用）"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("work\n    打印临时工作目录的名称，并在退出时不删除它（少用）。\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x\n    同时打印输出执行的命令名（"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("n）（少用）"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("asmflags "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'flag list'")]),s._v("\n    传递每个"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("工具asm调用的参数（少用）\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("buildmode mode\n    编译模式（少用）\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'go help buildmode'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("compiler name\n    使用的编译器 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" runtime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Compiler\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("gccgo or gc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("（少用）"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gccgoflags "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'arg list'")]),s._v("\n    gccgo 编译"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("链接器参数（少用）\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("gcflags "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'arg list'")]),s._v("\n    垃圾回收参数（少用）"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("installsuffix suffix\n    ？？？？？？不明白\n    a suffix to use in the name of the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" installation directory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    in order to keep output separate from "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" builds"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    If using the "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("race flag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" the install suffix is automatically set to race\n    or"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" set explicitly"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" has _race appended to it"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  Likewise "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("msan\n    flag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("  Using a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("buildmode option that requires non"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" compile flags\n    has a similar effect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ldflags "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'flag list'")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'-s -w'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 压缩编译后的体积\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 去掉符号表\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 去掉调试信息，不能gdb调试了\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("linkshared\n    链接到以前使用创建的共享库\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("buildmode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pkgdir dir\n    从指定位置，而不是通常的位置安装和加载所有软件包。例如，当使用非标准配置构建时，使用"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("pkgdir将生成的包保留在单独的位置。\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tags "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tag list'")]),s._v("\n    构建出带tag的版本"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("toolexec "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cmd args'")]),s._v("\n    ？？？？？？不明白\n    a program to use to invoke toolchain programs like vet and asm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    For example"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" instead of running asm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" the "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" command will run\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cmd args /path/to/asm <arguments for asm>'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br")])]),t("h2",{attrs:{id:"_3-跨平台编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-跨平台编译"}},[s._v("#")]),s._v(" 3 跨平台编译")]),s._v(" "),t("blockquote",[t("p",[s._v("Go提供了编译链工具，可以让我们在任何一个开发平台上，编译出其他平台的可执行文件。\n默认情况下，都是根据我们当前的机器生成的可执行文件，比如你的是Linux 64位，就会生成Linux 64位下的可执行文件，\n比如我的Mac;可以使用go env查看编译环境,以下截取重要的部分。")])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" env\nset GO111MODULE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("on\nset GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\nset GOBIN"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GOCACHE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Users\\Administrator\\AppData\\Local\\"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("build\nset GOENV"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Users\\Administrator\\AppData\\Roaming\\"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\\env\nset GOEXE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe\nset GOFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("mod"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GOHOSTARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\nset GOHOSTOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("windows\nset GONOPROXY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GONOSUMDB"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("windows\nset GOPATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("D"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\go_project\nset GOPRIVATE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GOPROXY"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("goproxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cn"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nset GOROOT"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Go\nset GOSUMDB"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sum"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("golang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\nset GOTMPDIR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset GOTOOLDIR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\Go\\pkg\\tool\\windows_amd64\nset GCCGO"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gccgo\nset AR"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ar\nset CC"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcc\nset CXX"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("g"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v("\nset CGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nset GOMOD"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("D"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\\go_project\\src\\github"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\\ourlang\\noUtil\\"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mod\nset CGO_CFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("O2\nset CGO_CPPFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nset CGO_CXXFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("O2\nset CGO_FFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("O2\nset CGO_LDFLAGS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("O2\nset PKG_CONFIG"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pkg"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("h3",{attrs:{id:"_3-1-具体操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-具体操作"}},[s._v("#")]),s._v(" 3.1 具体操作")]),s._v(" "),t("blockquote",[t("p",[s._v("编译跨平台的只需要修改"),t("code",[s._v("GOOS")]),s._v("、"),t("code",[s._v("GOARCH")]),s._v("、"),t("code",[s._v("CGO_ENABLED")]),s._v("三个环境变量即可")]),s._v(" "),t("ul",[t("li",[s._v("GOOS：目标平台的操作系统(darwin、freebsd、linux、windows)")]),s._v(" "),t("li",[s._v("GOARCH：目标平台的体系架构32位还是64位(386、amd64、arm)")]),s._v(" "),t("li",[s._v("交叉编译不支持 CGO 所以要禁用它")])])]),s._v(" "),t("h3",{attrs:{id:"_3-2-window环境举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-window环境举例"}},[s._v("#")]),s._v(" 3.2 Window环境举例")]),s._v(" "),t("p",[s._v("Window环境下编译 Mac 和 Linux 64位可执行程序")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("SET CGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nSET GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("darwin\nSET GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\n\nSET CGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nSET GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux\nSET GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_3-3-mac环境举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-mac环境举例"}},[s._v("#")]),s._v(" 3.3 Mac环境举例")]),s._v(" "),t("p",[s._v("Mac 下编译 Linux 和 Windows 64位可执行程序")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("CGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("linux GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\nCGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("windows GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-4-linux环境举例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-linux环境举例"}},[s._v("#")]),s._v(" 3.4 Linux环境举例")]),s._v(" "),t("p",[s._v("Linux 下编译 Mac 和 Windows 64位可执行程序")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[s._v("CGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("darwin GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\nCGO_ENABLED"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" GOOS"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("windows GOARCH"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("amd64 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" build main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_4-更多资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-更多资料"}},[s._v("#")]),s._v(" 4 更多资料")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://golang.org/doc/install/source#environment",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://golang.org/doc/install/source#environment"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://golang.org/pkg/go/build/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://golang.org/pkg/go/build/"),t("OutboundLink")],1)]),s._v(" "),t("src-comment")],1)}),[],!1,null,null,null);a.default=r.exports}}]);