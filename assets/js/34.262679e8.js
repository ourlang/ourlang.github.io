(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{380:function(s,a,t){"use strict";t.r(a);var e=t(18),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"centos安装rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos安装rocketmq"}},[s._v("#")]),s._v(" CentOS安装rocketmq")]),s._v(" "),t("h1",{attrs:{id:"_1-rocketmq快速入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-rocketmq快速入门"}},[s._v("#")]),s._v(" 1. RocketMQ快速入门")]),s._v(" "),t("p",[s._v("RocketMQ是阿里巴巴2016年MQ中间件，使用Java语言开发，在阿里内部，RocketMQ承接了例如“双11”等高并发场景的消息流转，能够处理万亿级别的消息。")]),s._v(" "),t("h2",{attrs:{id:"_1-1-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-准备工作"}},[s._v("#")]),s._v(" 1.1 准备工作")]),s._v(" "),t("h4",{attrs:{id:"_1-1-1-下载rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-下载rocketmq"}},[s._v("#")]),s._v(" 1.1.1 下载RocketMQ")]),s._v(" "),t("p",[s._v("RocketMQ版本：4.4.0")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://mirrors.tuna.tsinghua.edu.cn/apache/rocketmq/4.4.0/rocketmq-all-4.4.0-bin-release.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"下载RocketMQ",href:"https://img-blog.csdnimg.cn/20191116162628239.png"}},[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191116162628239.png",alt:"下载RocketMQ"}})])]),s._v(" "),t("h4",{attrs:{id:"_1-1-2-环境要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-环境要求"}},[s._v("#")]),s._v(" 1.1.2 环境要求")]),s._v(" "),t("ul",[t("li",[s._v("Linux64位系统")]),s._v(" "),t("li",[s._v("JDK1.8(64位)")]),s._v(" "),t("li",[s._v("源码安装需要安装Maven 3.2.x")])]),s._v(" "),t("h4",{attrs:{id:"_1-1-3-常用插件安装命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-常用插件安装命令"}},[s._v("#")]),s._v(" 1.1.3 常用插件安装命令")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v(" 解压文件    yum install -y unzip zip\n windows 需要向centos服务器上传文件   yum -y install lrzsz\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"_1-2-安装rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装rocketmq"}},[s._v("#")]),s._v(" 1.2 安装RocketMQ")]),s._v(" "),t("h4",{attrs:{id:"_1-2-1-安装步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-安装步骤"}},[s._v("#")]),s._v(" 1.2.1 安装步骤")]),s._v(" "),t("p",[s._v("本教程以二进制包方式安装")]),s._v(" "),t("h4",{attrs:{id:"_1-2-1-1-通过rz-把下载好的压缩文件上传到指定centos目录下面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-1-通过rz-把下载好的压缩文件上传到指定centos目录下面"}},[s._v("#")]),s._v(" 1.2.1.1 通过rz 把下载好的压缩文件上传到指定centos目录下面")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"安装RocketMQ",href:"https://img-blog.csdnimg.cn/20191116162608424.png"}},[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191116162608424.png",alt:"安装RocketMQ"}})])]),s._v(" "),t("h4",{attrs:{id:"_1-2-1-2-解压rocket4-4压缩包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-2-解压rocket4-4压缩包"}},[s._v("#")]),s._v(" 1.2.1.2.解压rocket4.4压缩包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("unzip -d /usr/software rocketmq-all-4.4.0-bin-release.zip\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("a",{attrs:{"data-fancybox":"",title:"解压rocket",href:"https://img-blog.csdnimg.cn/20191116162922761.png"}},[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191116162922761.png",alt:"解压rocket"}})])]),s._v(" "),t("h4",{attrs:{id:"_1-2-2-目录介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-目录介绍"}},[s._v("#")]),s._v(" 1.2.2 目录介绍")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"目录介绍",href:"https://img-blog.csdnimg.cn/20191116164747479.png"}},[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20191116164747479.png",alt:"目录介绍"}})])]),s._v(" "),t("ul",[t("li",[s._v("benchmark :rocketmq的一些代码示例")]),s._v(" "),t("li",[s._v("bin：启动脚本，包括shell脚本和CMD脚本")]),s._v(" "),t("li",[s._v("conf：实例配置文件 ，包括broker配置文件、logback配置文件等")]),s._v(" "),t("li",[s._v("lib：依赖jar包，包括Netty、commons-lang、FastJSON等")])]),s._v(" "),t("h2",{attrs:{id:"_1-3-启动rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-启动rocketmq"}},[s._v("#")]),s._v(" 1.3 启动RocketMQ")]),s._v(" "),t("ol",[t("li",[s._v("启动NameServer")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1.启动NameServer\nnohup sh bin/mqnamesrv &\n# 2.查看启动日志\ntail -f ~/logs/rocketmqlogs/namesrv.log\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",[t("li",[s._v("启动Broker")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1.启动Broker\nnohup sh bin/mqbroker -n localhost:9876 &\n# 2.查看启动日志\ntail -f ~/logs/rocketmqlogs/broker.log \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("问题描述：")]),s._v(" "),t("p",[s._v("RocketMQ默认的虚拟机内存较大，启动Broker如果因为内存不足失败，需要编辑如下两个配置文件，修改JVM内存大小")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 编辑runbroker.sh和runserver.sh修改默认JVM大小\nvi runbroker.sh\nvi runserver.sh\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("参考设置：")])]),s._v(" "),t("p",[t("code",[s._v('JAVA_OPT="${JAVA_OPT} -server -Xms256m -Xmx256m -Xmn128m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m"')])]),s._v(" "),t("h2",{attrs:{id:"_1-4-测试rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-测试rocketmq"}},[s._v("#")]),s._v(" 1.4 测试RocketMQ")]),s._v(" "),t("h4",{attrs:{id:"_1-4-1-发送消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-发送消息"}},[s._v("#")]),s._v(" 1.4.1 发送消息")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1.设置环境变量\nexport NAMESRV_ADDR=localhost:9876\n# 2.使用安装包的Demo发送消息\nsh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_1-4-2-接收消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-接收消息"}},[s._v("#")]),s._v(" 1.4.2 接收消息")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1.设置环境变量\nexport NAMESRV_ADDR=localhost:9876\n# 2.接收消息\nsh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h4",{attrs:{id:"_1-5-关闭rocketmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-关闭rocketmq"}},[s._v("#")]),s._v(" 1.5 关闭RocketMQ")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 1.关闭NameServer\nsh bin/mqshutdown namesrv\n# 2.关闭Broker\nsh bin/mqshutdown broker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),s._v(" "),t("src-comment")],1)}),[],!1,null,null,null);a.default=r.exports}}]);